<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>B·∫£ng ƒëi·ªÅu khi·ªÉn qu·∫£n tr·ªã</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="../assets/css/pages/Admin.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

  
  <!-- Supabase JS SDK t·ª´ CDN -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
  <!-- Header -->
  <div class="header d-flex justify-content-between align-items-center">
    <div class="header-left d-flex align-items-center gap-3">
      <a class="navbar-brand" href="#git add ">Blockify</a>
    </div>
    <div class="header-right d-flex align-items-center gap-2">
      <span id="adminName" class="header-link">ƒêang t·∫£i...</span>
      <a href="#" id="logoutBtn" class="header-link">üë§ ƒêƒÉng xu·∫•t</a>
    </div>
  </div>

  <div class="layout">
    <!-- Sidebar -->
    <aside class="sidebar d-flex flex-column">
      <div class="user d-flex align-items-center gap-2 mb-3">
        <img src="../../public/images/Group 40.png" alt="avatar">
        <div class="name">QTLHH</div>
      </div>
      <ul class="menu nav flex-column">
        <li class="active nav-item" data-target="dashboard">
          <i class="bi bi-speedometer2 me-2"></i>B·∫£ng ƒëi·ªÅu khi·ªÉn
        </li>
        
        <li class="nav-item" data-target="customer">
          <i class="bi bi-people-fill me-2 text-secondary"></i>Kh√°ch h√†ng
        </li>        
        <li class="nav-item" data-target="product">
          <i class="bi bi-box-seam me-2"></i>S·∫£n ph·∫©m
        </li>
        <li class="nav-item" data-target="order">
          <i class="bi bi-receipt-cutoff me-2"></i>ƒê∆°n h√†ng
        </li>
        <li class="nav-item" data-target="shop-info">
          <i class="bi bi-shop me-2"></i>Th√¥ng tin c·ª≠a h√†ng
        </li>
        <li class="nav-item" data-target="feedback-manager">
          <i class="bi bi-chat-dots me-2"></i>ƒê√°nh gi√° s·∫£n ph·∫©m
        </li>
        <li class="nav-item" data-target="voucher">
          <i class="bi bi-ticket-perforated me-2"></i>Qu·∫£n l√Ω Voucher
        </li>
        <li class="nav-item" data-target="notification">
          <i class="bi bi-bell-fill me-2 text-secondary"></i>Th√¥ng b√°o
        </li>
        
      </ul>
    </aside>

    <main class="main container-fluid">
      <!-- Dashboard -->
      <section id="dashboard" class="section active">
        <div class="dashboard-header">B·∫£ng ƒëi·ªÅu khi·ªÉn</div>
        <!-- Metrics Cards -->
        <div class="metrics-grid row g-3 mb-4">
          <div class="metric-card col-12 ">
            <div class="title">T·ªïng b√°n</div>
            <div class="value">‚Äî</div>
          </div>
          <div class="metric-card col-12 ">
            <div class="title">S·∫£n ph·∫©m m·ªõi</div>
            <div class="value">30</div>
          </div>
          <div class="metric-card col-12 ">
            <div class="title">Kh√°ch h√†ng m·ªõi</div>
            <div class="value">310</div>
          </div>
          <div class="metric-card col-12">
            <div class="title">T·ªìn kho</div>
            <div class="value">‚Äî</div>
          </div>
        </div>
        <!-- Dashboard Content -->
        <div class="dashboard-content row g-3">
          <!-- Chart Panel -->
          <div class="chart-panel col-12 col-lg-8">
            <div class="chart-header d-flex gap-3 mb-3">
              <div class="chart-tab">Doanh thu th√°ng</div>
              <div class="chart-tab inactive">Doanh thu ng√†y</div>
            </div>
            <div class="chart-container">
              <div class="chart-line"></div>
              <div class="chart-points">
                <div class="chart-point" style="height: 20px;"></div>
                <div class="chart-point" style="height: 35px;"></div>
                <div class="chart-point" style="height: 28px;"></div>
                <div class="chart-point" style="height: 45px;"></div>
                <div class="chart-point" style="height: 52px;"></div>
                <div class="chart-point" style="height: 38px;"></div>
                <div class="chart-point" style="height: 65px;"></div>
                <div class="chart-point" style="height: 58px;"></div>
                <div class="chart-point" style="height: 72px;"></div>
                <div class="chart-point" style="height: 45px;"></div>
                <div class="chart-point" style="height: 80px;"></div>
                <div class="chart-point" style="height: 85px;"></div>
              </div>
            </div>
          </div>
          <!-- Best Selling Products -->
          <div class="products-panel col-12 ">
            <div class="panel-title">S·∫£n ph·∫©m b√°n ch·∫°y</div>
            <div class="product-list">
              <div class="product-item d-flex align-items-center gap-2">
                <img class="product-thumb" src="img/Rectangle 108 (1).png" alt="">
                <div class="product-info">
                  <div class="product-name">Nh√† ƒë·ªÉ xe - 34 xe</div>
                  <div class="product-price">245.000 VND</div>
                </div>
              </div>
              <div class="product-item d-flex align-items-center gap-2">
                <img class="product-thumb" src="img/Rectangle 108 (2).png" alt="">
                <div class="product-info">
                  <div class="product-name">Xe c·∫£nh s√°t</div>
                  <div class="product-price">230.000 VND</div>
                </div>
              </div>
              <div class="product-item d-flex align-items-center gap-2">
                <img class="product-thumb" src="img/Rectangle 108 (3).png" alt="">
                <div class="product-info">
                  <div class="product-name">Xe x√¢y d·ª±ng m√†u v√†ng</div>
                  <div class="product-price">199.000 VND</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Customer -->
      <section id="customer" class="section">
        <div class="bar-blue">Kh√°ch h√†ng</div>
        <div class="toolbar d-flex gap-2 mb-3">
          <input class="search form-control" placeholder="T√¨m ki·∫øm kh√°ch h√†ng">
          
        </div>
        <div class="table-responsive">
          <table class="table table-bordered table-hover align-middle">
            <thead class="table-light">
              <tr>
                <th style="width:40px;"><input type="checkbox"></th>
                <th>T√™n</th>
                <th>Email</th>
                <th>S·ªë ƒëi·ªán tho·∫°i</th>
                <th>Tr·∫°ng th√°i</th>
                <th>H√†nh ƒë·ªông</th>
              </tr>
            </thead>
            <tbody id="customerList"></tbody>
          </table>
        </div>
      </section>

      <!-- Product -->
      <section id="product" class="section">
        <!-- Product Navbar -->
        <div class="product-navbar">
          <h3 class="navbar-title">Qu·∫£n l√Ω s·∫£n ph·∫©m</h3>
          <div class="navbar-actions">
            <input class="search form-control" placeholder="T√¨m ki·∫øm s·∫£n ph·∫©m" id="productSearch">
            <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addProductModal">
              <i class="bi bi-plus-circle me-1"></i>Th√™m s·∫£n ph·∫©m
            </button>
          </div>
        </div>
        
        <!-- Product List -->
        <div class="row g-3" id="productList">
          <!-- Products will be rendered here -->
        </div>
      </section>

      <!-- Shop Info -->
      <section id="shop-info" class="section">
        <div class="bar-blue mb-4">Th√¥ng tin c·ª≠a h√†ng</div>
        <div class="shop-info-panel panel">
          <form id="shopInfoForm">
            <div class="row mb-3 align-items-center">
              <div class="col-md-2 text-center mb-3 mb-md-0">
                <img id="shopLogoPreview" src="../../public/images/Group 40.png" alt="Logo shop" class="shop-logo img-thumbnail">
                <input type="file" id="shopLogo" class="form-control mt-2">
              </div>
              <div class="col-md-10">
                <div class="mb-3">
                  <label class="form-label">T√™n c·ª≠a h√†ng</label>
                  <input type="text" id="shopName" class="form-control" required>
                </div>
                <div class="mb-3">
                  <label class="form-label">ƒê·ªãa ch·ªâ</label>
                  <input type="text" id="shopAddress" class="form-control">
                </div>
                <div class="mb-3">
                  <label class="form-label">S·ªë ƒëi·ªán tho·∫°i</label>
                  <input type="text" id="shopPhone" class="form-control">
                </div>
                <div class="mb-3">
                  <label class="form-label">Email</label>
                  <input type="email" id="shopEmail" class="form-control">
                </div>
                <div class="mb-3">
                  <label class="form-label">M√¥ t·∫£</label>
                  <textarea id="shopDesc" class="form-control" rows="2"></textarea>
                </div>
                <button type="submit" class="btn btn-primary">L∆∞u thay ƒë·ªïi</button>
              </div>
            </div>
          </form>
        </div>
      </section>

      <!-- Order -->
      <section id="order" class="section">
        <div class="bar-blue">ƒê∆°n h√†ng</div>
        <div class="toolbar">
          <input class="search" placeholder="T√¨m ƒë∆°n h√†ng">
        </div>
        <div class="table-responsive">
        <table class="table table-bordered table-hover align-middle">
          <thead class="table-light">
            <tr>
              <th style="width:40px;"><input type="checkbox"></th>
              <th>M√£ h√≥a ƒë∆°n</th>
              <th>T√™n ƒë∆°n</th>
              <th>S·ªë l∆∞·ª£ng</th>
              <th>M·∫´u h√†ng</th>
              <th>H√¨nh SP</th>
              <th>Kh√°ch h√†ng</th>
              <th>ƒê·ªãa ch·ªâ giao h√†ng</th>
              <th>Email</th>
              <th>S·ªë ƒëi·ªán tho·∫°i</th>
              <th>Ng√†y ƒë·∫∑t</th>
              <th>T·ªïng ti·ªÅn</th>
              <th>Minh ch·ª©ng</th>
              <th>Ph∆∞∆°ng th·ª©c</th>
              <th>Tr·∫°ng th√°i</th>
              <th>H√†nh ƒë·ªông</th>
            </tr>
          </thead>
          <tbody id="orderList">
            <tr>
              <td><input type="checkbox"></td>
              <td>#ODR001</td>
              <td>Xe c·∫£nh s√°t</td>
              <td>1</td>
              <td>M·∫´u A</td>
              <td><img src="img/Rectangle 108 (2).png" alt="S·∫£n ph·∫©m" style="width:40px;height:30px;object-fit:cover;"></td>
              <td>ChessicaNguyen</td>
              <td>56 ƒê∆∞·ªùng L√™ L·ª£i, Q.1, TP.HCM</td>
              <td>chessica@gmail.com</td>
              <td>0908123456</td>
              <td>09-05-2025</td>
              <td>230.000 VND</td>
              <td><img src="img/pay-proof-001.png" alt="Minh ch·ª©ng" style="width:40px;height:30px;object-fit:cover;"></td>
              <td>Chuy·ªÉn kho·∫£n</td>
              <td><span class="badge bg-warning text-dark order-status">ƒêang x·ª≠ l√Ω</span></td>
              <td>
                <button type="button" class="btn btn-outline btn-sm show-order-detail" data-order-id="ODR001" data-bs-toggle="modal" data-bs-target="#orderDetailModal">Chi ti·∫øt</button>
                <button type="button" class="btn btn-outline btn-sm action-next-status mt-2" data-order-id="ODR001">C·∫≠p nh·∫≠t tr·∫°ng th√°i</button>
                <button type="button" class="btn btn-outline btn-sm check-payment-proof mt-2" data-order-id="ODR001">Ki·ªÉm minh ch·ª©ng</button>
                <button type="button" class="btn btn-outline btn-sm cancel-order-btn mt-2" data-order-id="ODR001">Hu·ª∑ ƒë∆°n</button>
                <button type="button" class="btn btn-outline btn-sm refund-order-btn mt-2" data-order-id="ODR001">Ho√†n/Tr·∫£ h√†ng</button>
              </td>
            </tr>
          </tbody>
        </table>
        </div>
      </section>
      <!-- Modal Chi ti·∫øt ƒê∆°n h√†ng -->
      <div class="modal fade" id="orderDetailModal" tabindex="-1" aria-labelledby="orderDetailLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="orderDetailLabel">Chi ti·∫øt ƒë∆°n h√†ng</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="ƒê√≥ng"></button>
            </div>
            <div class="modal-body">
              <div class="container">
                <div class="row mb-2"><div class="col-5 fw-semibold">Kh√°ch h√†ng:</div><div class="col" id="detailCustomerName"></div></div>
                <div class="row mb-2"><div class="col-5 fw-semibold">Email:</div><div class="col" id="detailCustomerEmail"></div></div>
                <div class="row mb-2"><div class="col-5 fw-semibold">SƒêT:</div><div class="col" id="detailCustomerPhone"></div></div>
                <div class="row mb-2"><div class="col-5 fw-semibold">ƒê·ªãa ch·ªâ:</div><div class="col" id="detailCustomerAddress"></div></div>
                <div class="row mb-2"><div class="col-5 fw-semibold">Ph∆∞∆°ng th·ª©c:</div><div class="col" id="detailPaymentMethod"></div></div>
                <div class="row mb-2"><div class="col-5 fw-semibold">M√£ h√≥a ƒë∆°n:</div><div class="col" id="detailOrderId"></div></div>
                <div class="row mb-2"><div class="col-5 fw-semibold">T√™n ƒë∆°n:</div><div class="col" id="detailOrderName"></div></div>
                <div class="row mb-2"><div class="col-5 fw-semibold">S·ªë l∆∞·ª£ng:</div><div class="col" id="detailOrderQuantity"></div></div>
                <div class="row mb-2"><div class="col-5 fw-semibold">M·∫´u h√†ng:</div><div class="col" id="detailOrderVariant"></div></div>
                <div class="row mb-2"><div class="col-5 fw-semibold">T·ªïng ti·ªÅn:</div><div class="col" id="detailOrderTotal"></div></div>
                <div class="row mb-2"><div class="col-5 fw-semibold">Tr·∫°ng th√°i:</div><div class="col" id="detailOrderStatus"></div></div>
                <div class="row mb-2"><div class="col-5 fw-semibold">H√¨nh s·∫£n ph·∫©m:</div><div class="col"><img id="detailProductImg" src="" class="img-fluid mb-2" style="width: 100px;"></div></div>
                <div class="row mb-2"><div class="col-5 fw-semibold">Minh ch·ª©ng thanh to√°n:</div><div class="col"><img id="detailPayProof" src="" class="img-fluid" style="width: 120px;"></div></div>
              </div>
            </div>
            <div class="modal-footer order-action-footer">
              <button type="button" class="btn btn-success next-status-btn">C·∫≠p nh·∫≠t tr·∫°ng th√°i</button>
              <button type="button" class="btn btn-info check-proof-btn">Ki·ªÉm minh ch·ª©ng thanh to√°n</button>
              <button type="button" class="btn btn-warning refund-btn">Ho√†n/Tr·∫£ h√†ng</button>
              <button type="button" class="btn btn-danger cancel-btn">H·ªßy ƒë∆°n</button>
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ƒê√≥ng</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Feedback Manager -->
      <section id="feedback-manager" class="section">
        <div class="bar-blue">Qu·∫£n l√Ω ƒë√°nh gi√° s·∫£n ph·∫©m</div>
        <div class="panel">
          <div class="feedback-list">
            <div class="feedback-item d-flex align-items-start gap-3">
              <img src="img/Rectangle 108 (2).png" class="feedback-thumb" alt="">
              <div class="flex-fill">
                <div class="d-flex justify-content-between align-items-center">
                  <strong class="feedback-product">Xe c·∫£nh s√°t</strong>
                  <span class="badge bg-primary ms-2">M·ªõi</span>
                </div>
                <div><b>T√™n kh√°ch:</b> Nguy·ªÖn VƒÉn A ¬∑ <b>Email:</b> vana@gmail.com ¬∑ <b>ƒê√°nh gi√°:</b>
                  <span class="text-warning">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                </div>
                <div><i>"S·∫£n ph·∫©m r·∫•t t·ªët, giao h√†ng nhanh!"</i></div>
                <div class="feedback-actions mt-1">
                  <button type="button" class="btn btn-outline btn-sm view-feedback-btn" data-feedback-id="FB001" data-bs-toggle="modal" data-bs-target="#feedbackDetailModal">Xem</button>
                  <button type="button" class="btn btn-outline-secondary btn-sm ms-2 acknowledge-feedback-btn" data-feedback-id="FB001">Ghi nh·∫≠n</button>
                </div>
              </div>
            </div>
            <div class="feedback-item d-flex align-items-start gap-3 mt-3">
              <img src="img/Rectangle 108 (3).png" class="feedback-thumb" alt="">
              <div class="flex-fill">
                <div class="d-flex justify-content-between align-items-center">
                  <strong class="feedback-product">Xe x√¢y d·ª±ng v√†ng</strong>
                  <span class="badge bg-primary ms-2">M·ªõi</span>
                </div>
                <div><b>T√™n kh√°ch:</b> Tr·∫ßn B·∫£o B ¬∑ <b>Email:</b> baobb@gmail.com ¬∑ <b>ƒê√°nh gi√°:</b>
                  <span class="text-warning">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</span>
                </div>
                <div><i>"ƒê√∫ng m√¥ t·∫£, b√© nh√† m√¨nh th√≠ch l·∫Øm."</i></div>
                <div class="feedback-actions mt-1">
                  <button type="button" class="btn btn-outline btn-sm view-feedback-btn" data-feedback-id="FB002">Xem</button>
                  <button type="button" class="btn btn-outline-secondary btn-sm ms-2 acknowledge-feedback-btn" data-feedback-id="FB002">Ghi nh·∫≠n</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Voucher Management -->
      <section id="voucher" class="section">
        <!-- Voucher Navbar -->
        <div class="voucher-navbar">
          <h3 class="navbar-title">Qu·∫£n l√Ω Voucher</h3>
          <div class="navbar-actions">
            <input class="search form-control" placeholder="T√¨m ki·∫øm voucher" id="voucherSearch">
            <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addVoucherModal">
              <i class="bi bi-plus-circle me-1"></i>Th√™m Voucher
            </button>
          </div>
        </div>
        
        <!-- Voucher List -->
        <div class="row g-3" id="voucherList">
          <!-- Vouchers will be rendered here -->
        </div>
      </section>

      <!-- Notification -->
      <section id="notification" class="section">
        <div class="bar-blue">Th√¥ng b√°o</div>
        <div class="toolbar">
          <input class="search" placeholder="T√¨m th√¥ng b√°o">
          <button class="btn btn-outline" title="X√≥a"><span>üóë</span></button>
        </div>
        <div class="panel">
          <div class="note">
            <strong>Giao h√†ng</strong>
            <div>ƒê∆°n h√†ng 1234 ƒë√£ ƒë∆∞·ª£c giao th√†nh c√¥ng</div>
          </div>
        </div>
      </section>
      <!-- Modal ph·∫£n h·ªìi ƒë√°nh gi√° -->
      <div class="modal fade" id="feedbackDetailModal" tabindex="-1" aria-labelledby="feedbackDetailLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="feedbackDetailLabel">Chi ti·∫øt ƒë√°nh gi√°/Ph·∫£n h·ªìi</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="ƒê√≥ng"></button>
            </div>
            <div class="modal-body">
              <div class="mb-2"><strong>S·∫£n ph·∫©m:</strong> <span id="feedbackProductName"></span></div>
              <div class="mb-2"><strong>Kh√°ch h√†ng:</strong> <span id="feedbackCustomer"></span> <span class="muted">(<span id="feedbackCustomerEmail"></span>)</span></div>
              <div class="mb-2"><strong>ƒê√°nh gi√°:</strong> <span id="feedbackStars"></span></div>
              <div class="mb-2"><strong>N·ªôi dung ph·∫£n h·ªìi:</strong>
                <div class="border rounded p-2 bg-light" id="feedbackContent"></div>
              </div>
              <div class="mt-3">
                <label for="adminReply" class="form-label"><strong>Ph·∫£n h·ªìi/Ghi nh·∫≠n c·ªßa qu·∫£n tr·ªã vi√™n:</strong></label>
                <textarea id="adminReply" rows="2" class="form-control" placeholder="Nh·∫≠p ph·∫£n h·ªìi ho·∫∑c nh·∫•n Ghi nh·∫≠n..."></textarea>
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-primary send-feedback-reply">G·ª≠i ph·∫£n h·ªìi</button>
              <button type="button" class="btn btn-outline-secondary acknowledge-feedback">Ghi nh·∫≠n</button>
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ƒê√≥ng</button>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Product Modal -->
  <div class="modal fade" id="addProductModal" tabindex="-1" aria-labelledby="addProductModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="addProductModalLabel">Th√™m s·∫£n ph·∫©m</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="ƒê√≥ng"></button>
        </div>
        <div class="modal-body">
          <form id="productForm">
            <div class="mb-3">
              <label class="form-label">H√¨nh ·∫£nh s·∫£n ph·∫©m (t·ªëi ƒëa 4 h√¨nh)</label>
              <div class="row g-2" id="productImagesContainer">
                <div class="col-6">
                  <input type="file" class="form-control product-image-input" accept="image/*" data-index="0">
                  <div class="image-preview mt-2" id="preview-0"></div>
                </div>
                <div class="col-6">
                  <input type="file" class="form-control product-image-input" accept="image/*" data-index="1">
                  <div class="image-preview mt-2" id="preview-1"></div>
                </div>
                <div class="col-6">
                  <input type="file" class="form-control product-image-input" accept="image/*" data-index="2">
                  <div class="image-preview mt-2" id="preview-2"></div>
                </div>
                <div class="col-6">
                  <input type="file" class="form-control product-image-input" accept="image/*" data-index="3">
                  <div class="image-preview mt-2" id="preview-3"></div>
                </div>
              </div>
            </div>
            <div class="mb-3">
              <label class="form-label">T√™n s·∫£n ph·∫©m</label>
              <input type="text" class="form-control" id="productName" required>
            </div>
            <div class="mb-3">
              <label class="form-label">Th∆∞∆°ng hi·ªáu</label>
              <input type="text" class="form-control" id="productBrand" required>
            </div>
            <div class="mb-3">
              <label class="form-label">Ch·ªß ƒë·ªÅ</label>
              <input type="text" class="form-control" id="productTheme">
            </div>
            <div class="mb-3">
              <label class="form-label">S·ªë m·∫£nh gh√©p</label>
              <input type="number" class="form-control" id="productPieces">
            </div>
            <div class="mb-3">
              <label class="form-label">T·ªìn kho</label>
              <input type="number" class="form-control" id="productStock">
            </div>
            <div class="mb-3">
              <label class="form-label">ƒê·ªô tu·ªïi</label>
              <input type="text" class="form-control" id="productAge">
            </div>
            <div class="mb-3">
              <label class="form-label">Gi√° (VND)</label>
              <input type="number" class="form-control" id="productPrice" min="0" required>
            </div>
            <div class="mb-3">
              <label class="form-label">Tr·∫°ng th√°i</label>
              <select class="form-control" id="productStatus" required>
                <option value="active">ƒêang b√°n</option>
                <option value="inactive">Ng·ª´ng b√°n</option>
                <option value="out_of_stock">H·∫øt h√†ng</option>
              </select>
            </div>
            <div class="mb-3">
              <label class="form-label">M√¥ t·∫£</label>
              <textarea class="form-control" id="productDesc" rows="3"></textarea>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">H·ªßy</button>
              <button type="submit" class="btn btn-primary">L∆∞u s·∫£n ph·∫©m</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
  </div>

  <!-- Edit Product Modal -->
  <div class="modal fade" id="editProductModal" tabindex="-1" aria-labelledby="editProductModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="editProductModalLabel">Ch·ªânh s·ª≠a s·∫£n ph·∫©m</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="ƒê√≥ng"></button>
        </div>
        <div class="modal-body">
          <form id="editProductForm">
            <input type="hidden" id="editProductId">
            <div class="mb-3">
              <label class="form-label">H√¨nh ·∫£nh s·∫£n ph·∫©m (t·ªëi ƒëa 4 h√¨nh)</label>
              <div class="row g-2" id="editProductImagesContainer">
                <div class="col-6">
                  <input type="file" class="form-control edit-product-image-input" accept="image/*" data-index="0">
                  <div class="image-preview mt-2" id="edit-preview-0"></div>
                </div>
                <div class="col-6">
                  <input type="file" class="form-control edit-product-image-input" accept="image/*" data-index="1">
                  <div class="image-preview mt-2" id="edit-preview-1"></div>
                </div>
                <div class="col-6">
                  <input type="file" class="form-control edit-product-image-input" accept="image/*" data-index="2">
                  <div class="image-preview mt-2" id="edit-preview-2"></div>
                </div>
                <div class="col-6">
                  <input type="file" class="form-control edit-product-image-input" accept="image/*" data-index="3">
                  <div class="image-preview mt-2" id="edit-preview-3"></div>
                </div>
              </div>
            </div>
            <div class="mb-3">
              <label class="form-label">T√™n s·∫£n ph·∫©m</label>
              <input type="text" class="form-control" id="editProductName" required>
            </div>
            <div class="mb-3">
              <label class="form-label">Th∆∞∆°ng hi·ªáu</label>
              <input type="text" class="form-control" id="editProductBrand" required>
            </div>
            <div class="mb-3">
              <label class="form-label">Ch·ªß ƒë·ªÅ</label>
              <input type="text" class="form-control" id="editProductTheme">
            </div>
            <div class="mb-3">
              <label class="form-label">S·ªë m·∫£nh gh√©p</label>
              <input type="number" class="form-control" id="editProductPieces">
            </div>
            <div class="mb-3">
              <label class="form-label">T·ªìn kho</label>
              <input type="number" class="form-control" id="editProductStock">
            </div>
            <div class="mb-3">
              <label class="form-label">ƒê·ªô tu·ªïi</label>
              <input type="text" class="form-control" id="editProductAge">
            </div>
            <div class="mb-3">
              <label class="form-label">Gi√° (VND)</label>
              <input type="number" class="form-control" id="editProductPrice" min="0" required>
            </div>
            <div class="mb-3">
              <label class="form-label">Tr·∫°ng th√°i</label>
              <select class="form-control" id="editProductStatus" required>
                <option value="active">ƒêang b√°n</option>
                <option value="inactive">Ng·ª´ng b√°n</option>
                <option value="out_of_stock">H·∫øt h√†ng</option>
              </select>
            </div>
            <div class="mb-3">
              <label class="form-label">M√¥ t·∫£</label>
              <textarea class="form-control" id="editProductDesc" rows="3"></textarea>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">H·ªßy</button>
              <button type="submit" class="btn btn-primary">C·∫≠p nh·∫≠t s·∫£n ph·∫©m</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Add Voucher Modal -->
  <div class="modal fade" id="addVoucherModal" tabindex="-1" aria-labelledby="addVoucherModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="addVoucherModalLabel">Th√™m Voucher</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="ƒê√≥ng"></button>
        </div>
        <div class="modal-body">
          <form id="voucherForm">
            <div class="row">
              <div class="col-md-6">
                <div class="mb-3">
                  <label class="form-label">T√™n phi·∫øu gi·∫£m gi√°</label>
                  <input type="text" class="form-control" id="voucherName" required>
                </div>
              </div>
              <div class="col-md-6">
                <div class="mb-3">
                  <label class="form-label">Lo·∫°i gi·∫£m gi√°</label>
                  <select class="form-control" id="voucherType" required>
                    <option value="">Ch·ªçn lo·∫°i gi·∫£m gi√°</option>
                    <option value="percentage">Gi·∫£m theo ph·∫ßn trƒÉm (%)</option>
                    <option value="fixed">Gi·∫£m c·ªë ƒë·ªãnh (VND)</option>
                  </select>
                </div>
              </div>
            </div>
            
            <div class="row">
              <div class="col-md-6">
                <div class="mb-3">
                  <label class="form-label">Gi√° tr·ªã gi·∫£m</label>
                  <input type="number" class="form-control" id="voucherValue" min="0" required>
                  <small class="form-text text-muted" id="voucherValueHelp">Nh·∫≠p s·ªë ph·∫ßn trƒÉm ho·∫∑c s·ªë ti·ªÅn</small>
                </div>
              </div>
              <div class="col-md-6">
                <div class="mb-3">
                  <label class="form-label">M·ª©c gi·∫£m t·ªëi ƒëa (VND)</label>
                  <input type="number" class="form-control" id="voucherMaxDiscount" min="0">
                  <small class="form-text text-muted">Ch·ªâ √°p d·ª•ng cho gi·∫£m theo ph·∫ßn trƒÉm</small>
                </div>
              </div>
            </div>
            
            <div class="row">
              <div class="col-md-6">
                <div class="mb-3">
                  <label class="form-label">Ng√†y b·∫Øt ƒë·∫ßu √°p d·ª•ng</label>
                  <input type="datetime-local" class="form-control" id="voucherStartDate" required>
                </div>
              </div>
              <div class="col-md-6">
                <div class="mb-3">
                  <label class="form-label">Ng√†y k·∫øt th√∫c √°p d·ª•ng</label>
                  <input type="datetime-local" class="form-control" id="voucherEndDate" required>
                </div>
              </div>
            </div>
            
            <div class="row">
              <div class="col-md-6">
                <div class="mb-3">
                  <label class="form-label">Gi√° tr·ªã ƒë∆°n h√†ng t·ªëi thi·ªÉu (VND)</label>
                  <input type="number" class="form-control" id="voucherMinOrder" min="0" required>
                </div>
              </div>
              <div class="col-md-6">
                <div class="mb-3">
                  <label class="form-label">S·ªë l·∫ßn ƒë∆∞·ª£c ph√©p s·ª≠ d·ª•ng</label>
                  <input type="number" class="form-control" id="voucherUsageLimit" min="1" required>
                </div>
              </div>
            </div>
            
            <div class="mb-3">
              <label class="form-label">M√¥ t·∫£ chi ti·∫øt</label>
              <textarea class="form-control" id="voucherDescription" rows="3" placeholder="M√¥ t·∫£ v·ªÅ voucher, ƒëi·ªÅu ki·ªán s·ª≠ d·ª•ng..."></textarea>
            </div>
            
            <div class="mb-3">
              <label class="form-label">Tr·∫°ng th√°i ho·∫°t ƒë·ªông</label>
              <select class="form-control" id="voucherStatus" required>
                <option value="active">ƒêang b·∫≠t</option>
                <option value="inactive">T·∫Øt</option>
              </select>
            </div>
            
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">H·ªßy</button>
              <button type="submit" class="btn btn-primary">L∆∞u Voucher</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Edit Voucher Modal -->
  <div class="modal fade" id="editVoucherModal" tabindex="-1" aria-labelledby="editVoucherModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="editVoucherModalLabel">Ch·ªânh s·ª≠a Voucher</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="ƒê√≥ng"></button>
        </div>
        <div class="modal-body">
          <form id="editVoucherForm">
            <input type="hidden" id="editVoucherId">
            <div class="row">
              <div class="col-md-6">
                <div class="mb-3">
                  <label class="form-label">T√™n phi·∫øu gi·∫£m gi√°</label>
                  <input type="text" class="form-control" id="editVoucherName" required>
                </div>
              </div>
              <div class="col-md-6">
                <div class="mb-3">
                  <label class="form-label">Lo·∫°i gi·∫£m gi√°</label>
                  <select class="form-control" id="editVoucherType" required>
                    <option value="">Ch·ªçn lo·∫°i gi·∫£m gi√°</option>
                    <option value="percentage">Gi·∫£m theo ph·∫ßn trƒÉm (%)</option>
                    <option value="fixed">Gi·∫£m c·ªë ƒë·ªãnh (VND)</option>
                  </select>
                </div>
              </div>
            </div>
            
            <div class="row">
              <div class="col-md-6">
                <div class="mb-3">
                  <label class="form-label">Gi√° tr·ªã gi·∫£m</label>
                  <input type="number" class="form-control" id="editVoucherValue" min="0" required>
                  <small class="form-text text-muted" id="editVoucherValueHelp">Nh·∫≠p s·ªë ph·∫ßn trƒÉm ho·∫∑c s·ªë ti·ªÅn</small>
                </div>
              </div>
              <div class="col-md-6">
                <div class="mb-3">
                  <label class="form-label">M·ª©c gi·∫£m t·ªëi ƒëa (VND)</label>
                  <input type="number" class="form-control" id="editVoucherMaxDiscount" min="0">
                  <small class="form-text text-muted">Ch·ªâ √°p d·ª•ng cho gi·∫£m theo ph·∫ßn trƒÉm</small>
                </div>
              </div>
            </div>
            
            <div class="row">
              <div class="col-md-6">
                <div class="mb-3">
                  <label class="form-label">Ng√†y b·∫Øt ƒë·∫ßu √°p d·ª•ng</label>
                  <input type="datetime-local" class="form-control" id="editVoucherStartDate" required>
                </div>
              </div>
              <div class="col-md-6">
                <div class="mb-3">
                  <label class="form-label">Ng√†y k·∫øt th√∫c √°p d·ª•ng</label>
                  <input type="datetime-local" class="form-control" id="editVoucherEndDate" required>
                </div>
              </div>
            </div>
            
            <div class="row">
              <div class="col-md-6">
                <div class="mb-3">
                  <label class="form-label">Gi√° tr·ªã ƒë∆°n h√†ng t·ªëi thi·ªÉu (VND)</label>
                  <input type="number" class="form-control" id="editVoucherMinOrder" min="0" required>
                </div>
              </div>
              <div class="col-md-6">
                <div class="mb-3">
                  <label class="form-label">S·ªë l·∫ßn ƒë∆∞·ª£c ph√©p s·ª≠ d·ª•ng</label>
                  <input type="number" class="form-control" id="editVoucherUsageLimit" min="1" required>
                </div>
              </div>
            </div>
            
            <div class="mb-3">
              <label class="form-label">M√¥ t·∫£ chi ti·∫øt</label>
              <textarea class="form-control" id="editVoucherDescription" rows="3" placeholder="M√¥ t·∫£ v·ªÅ voucher, ƒëi·ªÅu ki·ªán s·ª≠ d·ª•ng..."></textarea>
            </div>
            
            <div class="mb-3">
              <label class="form-label">Tr·∫°ng th√°i ho·∫°t ƒë·ªông</label>
              <select class="form-control" id="editVoucherStatus" required>
                <option value="active">ƒêang b·∫≠t</option>
                <option value="inactive">T·∫Øt</option>
              </select>
            </div>
            
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">H·ªßy</button>
              <button type="submit" class="btn btn-primary">C·∫≠p nh·∫≠t Voucher</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Load Bootstrap JS first -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  
  <!-- T·∫£i c·∫•u h√¨nh m√¥i tr∆∞·ªùng tr∆∞·ªõc -->
  <script type="module" src="/dist/src/core/config/env.js"></script>
  <script type="module" src="/dist/src/assets/js/components/Admin.js"></script>
  <script>
     // PRODUCT MANAGEMENT
     let productsData = [
            {
                id: 'PRD001',
                name: 'Nh√† ƒë·ªÉ xe - 34 xe',
                brand: 'Lego',
                theme: 'City',
                pieces: 34,
                stock: 15,
                age: '4+',
                price: 245000,
                status: 'active',
                description: 'Nh√† ƒë·ªÉ xe v·ªõi 34 xe ƒë·ªì ch∆°i',
                images: ['img/Rectangle 108 (1).png', 'img/Rectangle 108 (2).png']
            },
            {
                id: 'PRD002',
                name: 'Xe c·∫£nh s√°t',
                brand: 'Lego',
                theme: 'City',
                pieces: 25,
                stock: 8,
                age: '3+',
                price: 230000,
                status: 'active',
                description: 'Xe c·∫£nh s√°t v·ªõi ƒë√®n nh·∫•p nh√°y',
                images: ['img/Rectangle 108 (2).png']
            },
            {
                id: 'PRD003',
                name: 'Xe x√¢y d·ª±ng m√†u v√†ng',
                brand: 'Lego',
                theme: 'City',
                pieces: 45,
                stock: 0,
                age: '5+',
                price: 199000,
                status: 'out_of_stock',
                description: 'Xe x√¢y d·ª±ng m√†u v√†ng v·ªõi c·∫ßn c·∫©u',
                images: ['img/Rectangle 108 (3).png']
            },
            {
                id: 'PRD004',
                name: 'T√†u h·ªèa t·ªëc h√†nh',
                brand: 'Lego',
                theme: 'City',
                pieces: 67,
                stock: 12,
                age: '6+',
                price: 350000,
                status: 'active',
                description: 'T√†u h·ªèa t·ªëc h√†nh v·ªõi ƒë∆∞·ªùng ray',
                images: ['img/Rectangle 108 (1).png', 'img/Rectangle 108 (2).png', 'img/Rectangle 108 (3).png']
            },
            {
                id: 'PRD005',
                name: 'M√°y bay ph·∫£n l·ª±c',
                brand: 'Lego',
                theme: 'City',
                pieces: 89,
                stock: 5,
                age: '8+',
                price: 420000,
                status: 'active',
                description: 'M√°y bay ph·∫£n l·ª±c v·ªõi cabin m·ªü',
                images: ['img/Rectangle 108 (2).png', 'img/Rectangle 108 (3).png']
            },
            {
                id: 'PRD006',
                name: 'T√†u ng·∫ßm th√°m hi·ªÉm',
                brand: 'Lego',
                theme: 'City',
                pieces: 156,
                stock: 0,
                age: '9+',
                price: 580000,
                status: 'out_of_stock',
                description: 'T√†u ng·∫ßm th√°m hi·ªÉm ƒë·∫°i d∆∞∆°ng',
                images: ['img/Rectangle 108 (1).png', 'img/Rectangle 108 (2).png', 'img/Rectangle 108 (3).png']
            }
        ];
        
        // Initialize product management
        initializeProductManagement();
        
        function initializeProductManagement() {
            renderProductList();
            setupProductFormHandlers();
            setupProductSearch();
        }
        
        function renderProductList() {
            const productList = document.getElementById('productList');
            if (!productList) return;
            
            productList.innerHTML = productsData.map(product => `
                <div class="col-md-6 col-lg-4">
                    <div class="product-card panel">
                        <div class="product-actions">
                            <button class="btn btn-outline btn-sm edit-product-btn" data-product-id="${product.id}">
                                <i class="bi bi-pencil"></i>
                            </button>
                            <button class="btn btn-outline-danger btn-sm delete-product-btn" data-product-id="${product.id}">
                                <i class="bi bi-trash"></i>
                            </button>
                        </div>
                        
                        <div class="product-images">
                            ${product.images.map(img => `<img src="${img}" alt="${product.name}">`).join('')}
                        </div>
                        
                        <div class="product-info">
                            <h5 class="product-name">${product.name}</h5>
                            <div class="product-details">
                                <div><strong>Th∆∞∆°ng hi·ªáu:</strong> ${product.brand}</div>
                                <div><strong>Ch·ªß ƒë·ªÅ:</strong> ${product.theme}</div>
                                <div><strong>S·ªë m·∫£nh:</strong> ${product.pieces}</div>
                                <div><strong>T·ªìn kho:</strong> ${product.stock}</div>
                                <div><strong>ƒê·ªô tu·ªïi:</strong> ${product.age}</div>
                                <div><strong>Gi√°:</strong> ${product.price.toLocaleString()} VND</div>
                                <div><strong>Tr·∫°ng th√°i:</strong> 
                                    <span class="product-status ${product.status}">
                                        ${product.status === 'active' ? 'ƒêang b√°n' : 
                                          product.status === 'inactive' ? 'Ng·ª´ng b√°n' : 'H·∫øt h√†ng'}
                                    </span>
                                </div>
                            </div>
                            <div class="product-description mt-2">
                                <small class="text-muted">${product.description}</small>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
            
            attachProductActionEvents();
        }
        
        function attachProductActionEvents() {
            // Edit product buttons
            document.querySelectorAll('.edit-product-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const productId = btn.getAttribute('data-product-id');
                    editProduct(productId);
                });
            });
            
            // Delete product buttons
            document.querySelectorAll('.delete-product-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const productId = btn.getAttribute('data-product-id');
                    deleteProduct(productId);
                });
            });
        }
        
        function setupProductFormHandlers() {
            // Add product form
            const addProductForm = document.getElementById('productForm');
            if (addProductForm) {
                addProductForm.addEventListener('submit', handleAddProduct);
            }
            
            // Edit product form
            const editProductForm = document.getElementById('editProductForm');
            if (editProductForm) {
                editProductForm.addEventListener('submit', handleEditProduct);
            }
            
            // Image preview handlers
            setupImagePreviewHandlers();
        }
        
        function setupImagePreviewHandlers() {
            // Add product image previews
            document.querySelectorAll('.product-image-input').forEach(input => {
                input.addEventListener('change', function(e) {
                    const file = e.target.files[0];
                    const index = this.getAttribute('data-index');
                    const preview = document.getElementById(`preview-${index}`);
                    
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            preview.innerHTML = `<img src="${e.target.result}" alt="Preview">`;
                        };
                        reader.readAsDataURL(file);
                    } else {
                        preview.innerHTML = '<div class="empty">Ch·ªçn h√¨nh ·∫£nh</div>';
                    }
                });
            });
            
            // Edit product image previews
            document.querySelectorAll('.edit-product-image-input').forEach(input => {
                input.addEventListener('change', function(e) {
                    const file = e.target.files[0];
                    const index = this.getAttribute('data-index');
                    const preview = document.getElementById(`edit-preview-${index}`);
                    
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            preview.innerHTML = `<img src="${e.target.result}" alt="Preview">`;
                        };
                        reader.readAsDataURL(file);
                    } else {
                        preview.innerHTML = '<div class="empty">Ch·ªçn h√¨nh ·∫£nh</div>';
                    }
                });
            });
        }
        
        function handleAddProduct(e) {
            e.preventDefault();
            
            const formData = {
                id: 'PRD' + String(productsData.length + 1).padStart(3, '0'),
                name: document.getElementById('productName').value,
                brand: document.getElementById('productBrand').value,
                theme: document.getElementById('productTheme').value,
                pieces: parseInt(document.getElementById('productPieces').value) || 0,
                stock: parseInt(document.getElementById('productStock').value) || 0,
                age: document.getElementById('productAge').value,
                price: parseInt(document.getElementById('productPrice').value),
                status: document.getElementById('productStatus').value,
                description: document.getElementById('productDesc').value,
                images: []
            };
            
            // Get image files
            const imageInputs = document.querySelectorAll('.product-image-input');
            imageInputs.forEach(input => {
                if (input.files[0]) {
                    // In real app, you would upload files to server
                    // For demo, we'll use placeholder
                    formData.images.push('img/Rectangle 108 (1).png');
                }
            });
            
            productsData.push(formData);
            renderProductList();
            
            // Reset form
            document.getElementById('productForm').reset();
            document.querySelectorAll('.image-preview').forEach(preview => {
                preview.innerHTML = '<div class="empty">Ch·ªçn h√¨nh ·∫£nh</div>';
            });
            
            // Close modal
            bootstrap.Modal.getInstance(document.getElementById('addProductModal'))?.hide();
            
            alert('Th√™m s·∫£n ph·∫©m th√†nh c√¥ng!');
        }
        
        function editProduct(productId) {
            const product = productsData.find(p => p.id === productId);
            if (!product) return;
            
            // Fill edit form
            document.getElementById('editProductId').value = product.id;
            document.getElementById('editProductName').value = product.name;
            document.getElementById('editProductBrand').value = product.brand;
            document.getElementById('editProductTheme').value = product.theme;
            document.getElementById('editProductPieces').value = product.pieces;
            document.getElementById('editProductStock').value = product.stock;
            document.getElementById('editProductAge').value = product.age;
            document.getElementById('editProductPrice').value = product.price;
            document.getElementById('editProductStatus').value = product.status;
            document.getElementById('editProductDesc').value = product.description;
            
            // Reset image previews
            document.querySelectorAll('.edit-product-image-input').forEach(input => {
                input.value = '';
            });
            document.querySelectorAll('[id^="edit-preview-"]').forEach(preview => {
                preview.innerHTML = '<div class="empty">Ch·ªçn h√¨nh ·∫£nh</div>';
            });
            
            // Show edit modal
            const editModal = new bootstrap.Modal(document.getElementById('editProductModal'));
            editModal.show();
        }
        
        function handleEditProduct(e) {
            e.preventDefault();
            
            const productId = document.getElementById('editProductId').value;
            const productIndex = productsData.findIndex(p => p.id === productId);
            
            if (productIndex === -1) return;
            
            // Update product data
            productsData[productIndex] = {
                ...productsData[productIndex],
                name: document.getElementById('editProductName').value,
                brand: document.getElementById('editProductBrand').value,
                theme: document.getElementById('editProductTheme').value,
                pieces: parseInt(document.getElementById('editProductPieces').value) || 0,
                stock: parseInt(document.getElementById('editProductStock').value) || 0,
                age: document.getElementById('editProductAge').value,
                price: parseInt(document.getElementById('editProductPrice').value),
                status: document.getElementById('editProductStatus').value,
                description: document.getElementById('editProductDesc').value
            };
            
            renderProductList();
            
            // Close modal
            bootstrap.Modal.getInstance(document.getElementById('editProductModal'))?.hide();
            
            alert('C·∫≠p nh·∫≠t s·∫£n ph·∫©m th√†nh c√¥ng!');
        }
        
        function deleteProduct(productId) {
            if (confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a s·∫£n ph·∫©m n√†y?')) {
                const productIndex = productsData.findIndex(p => p.id === productId);
                if (productIndex !== -1) {
                    productsData.splice(productIndex, 1);
                    renderProductList();
                    alert('X√≥a s·∫£n ph·∫©m th√†nh c√¥ng!');
                }
            }
        }
        
        function setupProductSearch() {
            const searchInput = document.getElementById('productSearch');
            if (searchInput) {
                searchInput.addEventListener('input', function(e) {
                    const searchTerm = e.target.value.toLowerCase();
                    const filteredProducts = productsData.filter(product => 
                        product.name.toLowerCase().includes(searchTerm) ||
                        product.brand.toLowerCase().includes(searchTerm) ||
                        product.theme.toLowerCase().includes(searchTerm)
                    );
                    
                    renderFilteredProductList(filteredProducts);
                });
            }
        }
        
        function renderFilteredProductList(products) {
            const productList = document.getElementById('productList');
            if (!productList) return;
            
            if (products.length === 0) {
                productList.innerHTML = '<div class="col-12"><div class="text-center text-muted">Kh√¥ng t√¨m th·∫•y s·∫£n ph·∫©m n√†o</div></div>';
                return;
            }
            
            productList.innerHTML = products.map(product => `
    <div class="col-md-6 col-lg-4">
        <div class="product-card panel">
            <div class="product-actions">
                <button class="btn btn-outline btn-sm edit-product-btn" data-product-id="${product.id}">
                    <i class="bi bi-pencil"></i>
                </button>
                <button class="btn btn-outline-danger btn-sm delete-product-btn" data-product-id="${product.id}">
                    <i class="bi bi-trash"></i>
                </button>
            </div>
            
            <div class="product-images">
                ${product.images.map(img => `<img src="${img}" alt="${product.name}" style="width: 100%; height: auto; border-radius: 0px;">`).join('')}
            </div>
            
            <div class="product-info">
                <h5 class="product-name">${product.name}</h5>
                <div class="product-details">
                    <div><strong>Th∆∞∆°ng hi·ªáu:</strong> ${product.brand}</div>
                    <div><strong>Ch·ªß ƒë·ªÅ:</strong> ${product.theme}</div>
                    <div><strong>S·ªë m·∫£nh:</strong> ${product.pieces}</div>
                    <div><strong>T·ªìn kho:</strong> ${product.stock}</div>
                    <div><strong>ƒê·ªô tu·ªïi:</strong> ${product.age}</div>
                    <div><strong>Gi√°:</strong> ${product.price.toLocaleString()} VND</div>
                    <div><strong>Tr·∫°ng th√°i:</strong> 
                        <span class="product-status ${product.status}">
                            ${product.status === 'active' ? 'ƒêang b√°n' : 
                              product.status === 'inactive' ? 'Ng·ª´ng b√°n' : 'H·∫øt h√†ng'}
                        </span>
                    </div>
                </div>
                <div class="product-description mt-2">
                    <small class="text-muted">${product.description}</small>
                </div>
            </div>
        </div>
    </div>
`).join('');

            
            attachProductActionEvents();
        }
        // DEMO DATA PH·∫¢N H·ªíI/ƒê√ÅNH GI√Å
        const feedbackListDemo = [
            {
                id: 'FB001',
                product: 'Xe c·∫£nh s√°t',
                productImg: 'img/Rectangle 108 (2).png',
                customer: 'Nguy·ªÖn VƒÉn A',
                customerEmail: 'vana@gmail.com',
                stars: 5,
                content: 'S·∫£n ph·∫©m r·∫•t t·ªët, giao h√†ng nhanh!',
                replied: false,
                adminReply: ''
            },
            {
                id: 'FB002',
                product: 'Xe x√¢y d·ª±ng v√†ng',
                productImg: 'img/Rectangle 108 (3).png',
                customer: 'Tr·∫ßn B·∫£o B',
                customerEmail: 'baobb@gmail.com',
                stars: 4,
                content: 'ƒê√∫ng m√¥ t·∫£, b√© nh√† m√¨nh th√≠ch l·∫Øm.',
                replied: false,
                adminReply: ''
            },
        ];
          // VOUCHER MANAGEMENT
          let vouchersData = [
            {
                id: 'VCH001',
                name: 'Gi·∫£m gi√° 20% cho ƒë∆°n h√†ng ƒë·∫ßu ti√™n',
                code: 'WELCOME20',
                type: 'percentage',
                value: 20,
                maxDiscount: 100000,
                startDate: '2024-01-01T00:00',
                endDate: '2024-12-31T23:59',
                minOrder: 200000,
                usageLimit: 1000,
                usedCount: 156,
                description: 'Voucher gi·∫£m gi√° 20% cho kh√°ch h√†ng m·ªõi, √°p d·ª•ng cho ƒë∆°n h√†ng ƒë·∫ßu ti√™n',
                status: 'active'
            },
            {
                id: 'VCH002',
                name: 'Gi·∫£m 50.000 VND cho ƒë∆°n h√†ng t·ª´ 500.000 VND',
                code: 'SAVE50K',
                type: 'fixed',
                value: 50000,
                maxDiscount: 0,
                startDate: '2024-01-15T00:00',
                endDate: '2024-06-30T23:59',
                minOrder: 500000,
                usageLimit: 500,
                usedCount: 89,
                description: 'Gi·∫£m gi√° c·ªë ƒë·ªãnh 50.000 VND cho ƒë∆°n h√†ng t·ª´ 500.000 VND tr·ªü l√™n',
                status: 'active'
            },
            {
                id: 'VCH003',
                name: 'Gi·∫£m gi√° 15% cho ng√†y l·ªÖ',
                code: 'HOLIDAY15',
                type: 'percentage',
                value: 15,
                maxDiscount: 200000,
                startDate: '2024-02-10T00:00',
                endDate: '2024-02-15T23:59',
                minOrder: 300000,
                usageLimit: 200,
                usedCount: 200,
                description: 'Voucher ƒë·∫∑c bi·ªát cho d·ªãp l·ªÖ T·∫øt, gi·∫£m 15% t·ªëi ƒëa 200.000 VND',
                status: 'expired'
            },
            {
                id: 'VCH004',
                name: 'Gi·∫£m 30.000 VND cho sinh nh·∫≠t',
                code: 'BIRTHDAY30',
                type: 'fixed',
                value: 30000,
                maxDiscount: 0,
                startDate: '2024-03-01T00:00',
                endDate: '2024-12-31T23:59',
                minOrder: 150000,
                usageLimit: 1,
                usedCount: 0,
                description: 'Voucher sinh nh·∫≠t ƒë·∫∑c bi·ªát, m·ªói kh√°ch h√†ng ch·ªâ ƒë∆∞·ª£c s·ª≠ d·ª•ng 1 l·∫ßn',
                status: 'inactive'
            }
        ];
        
        // Initialize voucher management
        initializeVoucherManagement();
        
        function initializeVoucherManagement() {
            renderVoucherList();
            setupVoucherFormHandlers();
            setupVoucherSearch();
        }
        
        function renderVoucherList() {
            const voucherList = document.getElementById('voucherList');
            if (!voucherList) return;
            
            voucherList.innerHTML = vouchersData.map(voucher => {
                const currentDate = new Date();
                const startDate = new Date(voucher.startDate);
                const endDate = new Date(voucher.endDate);
                const isExpired = currentDate > endDate;
                const isNotStarted = currentDate < startDate;
                
                let statusClass = voucher.status;
                if (isExpired) statusClass = 'expired';
                
                // Calculate usage percentage
                const usagePercentage = Math.round((voucher.usedCount / voucher.usageLimit) * 100);
                
                // Calculate time remaining
                const timeRemaining = calculateTimeRemaining(endDate);
                
                // Get voucher icon based on type
                const voucherIcon = voucher.type === 'percentage' ? '%' : '‚Ç´';
                
                return `
                    <div class="col-6">
                        <div class="voucher" onclick="editVoucher('${voucher.id}')">
                            <div class="voucher-left">
                                <span class="tag">S·ªë l∆∞·ª£ng c√≥ h·∫°n</span>
                                <div class="voucher-img">${voucherIcon}</div>
                            </div>
                            <div class="voucher-right">
                                <div class="voucher-title">
                                    <span class="badge">${voucher.type === 'percentage' ? 'Gi·∫£m %' : 'Gi·∫£m ti·ªÅn'}</span>
                                    ${voucher.name}
                                </div>
                                <div class="progress-bar">
                                    <div class="progress" style="width:${usagePercentage}%"></div>
                                </div>
                                <div class="voucher-info">
                                    <span>C√≤n ${100 - usagePercentage}%</span> - 
                                    <span class="expire">${timeRemaining}</span>
                                </div>
                                <div class="voucher-code-display">M√£: ${voucher.code}</div>
                                <div class="voucher-details-grid">
                                    <div class="voucher-detail-item">
                                        <span class="voucher-detail-label">Gi√° tr·ªã:</span>
                                        <span class="voucher-detail-value">
                                            ${voucher.type === 'percentage' ? `${voucher.value}%` : `${voucher.value.toLocaleString()} VND`}
                                        </span>
                                    </div>
                                    <div class="voucher-detail-item">
                                        <span class="voucher-detail-label">T·ªëi thi·ªÉu:</span>
                                        <span class="voucher-detail-value">${voucher.minOrder.toLocaleString()} VND</span>
                                    </div>
                                    <div class="voucher-detail-item">
                                        <span class="voucher-detail-label">ƒê√£ d√πng:</span>
                                        <span class="voucher-detail-value">${voucher.usedCount}/${voucher.usageLimit}</span>
                                    </div>
                                    <div class="voucher-detail-item">
                                        <span class="voucher-detail-label">Tr·∫°ng th√°i:</span>
                                        <span class="voucher-detail-value">
                                            ${statusClass === 'active' ? 'ƒêang b·∫≠t' : 
                                              statusClass === 'inactive' ? 'T·∫Øt' : 'H·∫øt h·∫°n'}
                                        </span>
                                    </div>
                                </div>
                                <div class="voucher-actions">
                                    <button class="view-btn" onclick="event.stopPropagation(); editVoucher('${voucher.id}')">
                                        Ch·ªânh s·ª≠a
                                    </button>
                                    <button class="delete-btn" onclick="event.stopPropagation(); deleteVoucher('${voucher.id}')">
                                        X√≥a
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
            
            attachVoucherActionEvents();
        }
        
        function attachVoucherActionEvents() {
            // Edit voucher buttons
            document.querySelectorAll('.view-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const voucherId = btn.getAttribute('onclick')?.match(/'([^']+)'/)?.[1];
                    if (voucherId) {
                        editVoucher(voucherId);
                    }
                });
            });
            
            // Delete voucher buttons
            document.querySelectorAll('.delete-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const voucherId = btn.getAttribute('onclick')?.match(/'([^']+)'/)?.[1];
                    if (voucherId) {
                        deleteVoucher(voucherId);
                    }
                });
            });
        }
        
        function setupVoucherFormHandlers() {
            // Add voucher form
            const addVoucherForm = document.getElementById('voucherForm');
            if (addVoucherForm) {
                addVoucherForm.addEventListener('submit', handleAddVoucher);
            }
            
            // Edit voucher form
            const editVoucherForm = document.getElementById('editVoucherForm');
            if (editVoucherForm) {
                editVoucherForm.addEventListener('submit', handleEditVoucher);
            }
            
            // Voucher type change handlers
            setupVoucherTypeHandlers();
        }
        
        function setupVoucherTypeHandlers() {
            // Add voucher type handlers
            const addVoucherType = document.getElementById('voucherType');
            const addVoucherValueHelp = document.getElementById('voucherValueHelp');
            const addVoucherMaxDiscount = document.getElementById('voucherMaxDiscount');
            
            if (addVoucherType) {
                addVoucherType.addEventListener('change', function() {
                    const type = this.value;
                    if (type === 'percentage') {
                        addVoucherValueHelp.textContent = 'Nh·∫≠p s·ªë ph·∫ßn trƒÉm (v√≠ d·ª•: 20)';
                        addVoucherMaxDiscount.parentElement.style.display = 'block';
                    } else if (type === 'fixed') {
                        addVoucherValueHelp.textContent = 'Nh·∫≠p s·ªë ti·ªÅn gi·∫£m (v√≠ d·ª•: 50000)';
                        addVoucherMaxDiscount.parentElement.style.display = 'none';
                    } else {
                        addVoucherValueHelp.textContent = 'Nh·∫≠p s·ªë ph·∫ßn trƒÉm ho·∫∑c s·ªë ti·ªÅn';
                        addVoucherMaxDiscount.parentElement.style.display = 'block';
                    }
                });
            }
            
            // Edit voucher type handlers
            const editVoucherType = document.getElementById('editVoucherType');
            const editVoucherValueHelp = document.getElementById('editVoucherValueHelp');
            const editVoucherMaxDiscount = document.getElementById('editVoucherMaxDiscount');
            
            if (editVoucherType) {
                editVoucherType.addEventListener('change', function() {
                    const type = this.value;
                    if (type === 'percentage') {
                        editVoucherValueHelp.textContent = 'Nh·∫≠p s·ªë ph·∫ßn trƒÉm (v√≠ d·ª•: 20)';
                        editVoucherMaxDiscount.parentElement.style.display = 'block';
                    } else if (type === 'fixed') {
                        editVoucherValueHelp.textContent = 'Nh·∫≠p s·ªë ti·ªÅn gi·∫£m (v√≠ d·ª•: 50000)';
                        editVoucherMaxDiscount.parentElement.style.display = 'none';
                    } else {
                        editVoucherValueHelp.textContent = 'Nh·∫≠p s·ªë ph·∫ßn trƒÉm ho·∫∑c s·ªë ti·ªÅn';
                        editVoucherMaxDiscount.parentElement.style.display = 'block';
                    }
                });
            }
        }
        
        function handleAddVoucher(e) {
            e.preventDefault();
            
            const formData = {
                id: 'VCH' + String(vouchersData.length + 1).padStart(3, '0'),
                name: document.getElementById('voucherName').value,
                code: generateVoucherCode(),
                type: document.getElementById('voucherType').value,
                value: parseInt(document.getElementById('voucherValue').value),
                maxDiscount: parseInt(document.getElementById('voucherMaxDiscount').value) || 0,
                startDate: document.getElementById('voucherStartDate').value,
                endDate: document.getElementById('voucherEndDate').value,
                minOrder: parseInt(document.getElementById('voucherMinOrder').value),
                usageLimit: parseInt(document.getElementById('voucherUsageLimit').value),
                usedCount: 0,
                description: document.getElementById('voucherDescription').value,
                status: document.getElementById('voucherStatus').value
            };
            
            vouchersData.push(formData);
            renderVoucherList();
            
            // Reset form
            document.getElementById('voucherForm').reset();
            
            // Close modal
            bootstrap.Modal.getInstance(document.getElementById('addVoucherModal'))?.hide();
            
            alert('Th√™m voucher th√†nh c√¥ng!');
        }
        
        function editVoucher(voucherId) {
            const voucher = vouchersData.find(v => v.id === voucherId);
            if (!voucher) return;
            
            // Fill edit form
            document.getElementById('editVoucherId').value = voucher.id;
            document.getElementById('editVoucherName').value = voucher.name;
            document.getElementById('editVoucherType').value = voucher.type;
            document.getElementById('editVoucherValue').value = voucher.value;
            document.getElementById('editVoucherMaxDiscount').value = voucher.maxDiscount;
            document.getElementById('editVoucherStartDate').value = voucher.startDate;
            document.getElementById('editVoucherEndDate').value = voucher.endDate;
            document.getElementById('editVoucherMinOrder').value = voucher.minOrder;
            document.getElementById('editVoucherUsageLimit').value = voucher.usageLimit;
            document.getElementById('editVoucherDescription').value = voucher.description;
            document.getElementById('editVoucherStatus').value = voucher.status;
            
            // Trigger type change to update help text
            document.getElementById('editVoucherType').dispatchEvent(new Event('change'));
            
            // Show edit modal
            const editModal = new bootstrap.Modal(document.getElementById('editVoucherModal'));
            editModal.show();
        }
        
        function handleEditVoucher(e) {
            e.preventDefault();
            
            const voucherId = document.getElementById('editVoucherId').value;
            const voucherIndex = vouchersData.findIndex(v => v.id === voucherId);
            
            if (voucherIndex === -1) return;
            
            // Update voucher data
            vouchersData[voucherIndex] = {
                ...vouchersData[voucherIndex],
                name: document.getElementById('editVoucherName').value,
                type: document.getElementById('editVoucherType').value,
                value: parseInt(document.getElementById('editVoucherValue').value),
                maxDiscount: parseInt(document.getElementById('editVoucherMaxDiscount').value) || 0,
                startDate: document.getElementById('editVoucherStartDate').value,
                endDate: document.getElementById('editVoucherEndDate').value,
                minOrder: parseInt(document.getElementById('editVoucherMinOrder').value),
                usageLimit: parseInt(document.getElementById('editVoucherUsageLimit').value),
                description: document.getElementById('editVoucherDescription').value,
                status: document.getElementById('editVoucherStatus').value
            };
            
            renderVoucherList();
            
            // Close modal
            bootstrap.Modal.getInstance(document.getElementById('editVoucherModal'))?.hide();
            
            alert('C·∫≠p nh·∫≠t voucher th√†nh c√¥ng!');
        }
        
        function deleteVoucher(voucherId) {
            if (confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a voucher n√†y?')) {
                const voucherIndex = vouchersData.findIndex(v => v.id === voucherId);
                if (voucherIndex !== -1) {
                    vouchersData.splice(voucherIndex, 1);
                    renderVoucherList();
                    alert('X√≥a voucher th√†nh c√¥ng!');
                }
            }
        }
        
        function setupVoucherSearch() {
            const searchInput = document.getElementById('voucherSearch');
            if (searchInput) {
                searchInput.addEventListener('input', function(e) {
                    const searchTerm = e.target.value.toLowerCase();
                    const filteredVouchers = vouchersData.filter(voucher => 
                        voucher.name.toLowerCase().includes(searchTerm) ||
                        voucher.code.toLowerCase().includes(searchTerm) ||
                        voucher.description.toLowerCase().includes(searchTerm)
                    );
                    
                    renderFilteredVoucherList(filteredVouchers);
                });
            }
        }
        
        function renderFilteredVoucherList(vouchers) {
            const voucherList = document.getElementById('voucherList');
            if (!voucherList) return;
            
            if (vouchers.length === 0) {
                voucherList.innerHTML = '<div class="col-12"><div class="text-center text-muted">Kh√¥ng t√¨m th·∫•y voucher n√†o</div></div>';
                return;
            }
            
            voucherList.innerHTML = vouchers.map(voucher => {
                const currentDate = new Date();
                const startDate = new Date(voucher.startDate);
                const endDate = new Date(voucher.endDate);
                const isExpired = currentDate > endDate;
                
                let statusClass = voucher.status;
                if (isExpired) statusClass = 'expired';
                
                // Calculate usage percentage
                const usagePercentage = Math.round((voucher.usedCount / voucher.usageLimit) * 100);
                
                // Calculate time remaining
                const timeRemaining = calculateTimeRemaining(endDate);
                
                // Get voucher icon based on type
                const voucherIcon = voucher.type === 'percentage' ? '%' : '‚Ç´';
                
                return `
                    <div class="col-6">
                        <div class="voucher" onclick="editVoucher('${voucher.id}')">
                            <div class="voucher-left">
                                <span class="tag">S·ªë l∆∞·ª£ng c√≥ h·∫°n</span>
                                <div class="voucher-img">${voucherIcon}</div>
                            </div>
                            <div class="voucher-right">
                                <div class="voucher-title">
                                    <span class="badge">${voucher.type === 'percentage' ? 'Gi·∫£m %' : 'Gi·∫£m ti·ªÅn'}</span>
                                    ${voucher.name}
                                </div>
                                <div class="progress-bar">
                                    <div class="progress" style="width:${usagePercentage}%"></div>
                                </div>
                                <div class="voucher-info">
                                    <span>C√≤n ${100 - usagePercentage}%</span> - 
                                    <span class="expire">${timeRemaining}</span>
                                </div>
                                <div class="voucher-code-display">M√£: ${voucher.code}</div>
                                <div class="voucher-details-grid">
                                    <div class="voucher-detail-item">
                                        <span class="voucher-detail-label">Gi√° tr·ªã:</span>
                                        <span class="voucher-detail-value">
                                            ${voucher.type === 'percentage' ? `${voucher.value}%` : `${voucher.value.toLocaleString()} VND`}
                                        </span>
                                    </div>
                                    <div class="voucher-detail-item">
                                        <span class="voucher-detail-label">T·ªëi thi·ªÉu:</span>
                                        <span class="voucher-detail-value">${voucher.minOrder.toLocaleString()} VND</span>
                                    </div>
                                    <div class="voucher-detail-item">
                                        <span class="voucher-detail-label">ƒê√£ d√πng:</span>
                                        <span class="voucher-detail-value">${voucher.usedCount}/${voucher.usageLimit}</span>
                                    </div>
                                    <div class="voucher-detail-item">
                                        <span class="voucher-detail-label">Tr·∫°ng th√°i:</span>
                                        <span class="voucher-detail-value">
                                            ${statusClass === 'active' ? 'ƒêang b·∫≠t' : 
                                              statusClass === 'inactive' ? 'T·∫Øt' : 'H·∫øt h·∫°n'}
                                        </span>
                                    </div>
                                </div>
                                <div class="voucher-actions">
                                    <button class="view-btn" onclick="event.stopPropagation(); editVoucher('${voucher.id}')">
                                        Ch·ªânh s·ª≠a
                                    </button>
                                    <button class="delete-btn" onclick="event.stopPropagation(); deleteVoucher('${voucher.id}')">
                                        X√≥a
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
            
            attachVoucherActionEvents();
        }
        
        function generateVoucherCode() {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            let result = '';
            for (let i = 0; i < 8; i++) {
                result += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return result;
        }
        
        function formatDateRange(startDate, endDate) {
            const start = new Date(startDate);
            const end = new Date(endDate);
            const startStr = start.toLocaleDateString('vi-VN');
            const endStr = end.toLocaleDateString('vi-VN');
            return `${startStr} - ${endStr}`;
        }
        
        function calculateTimeRemaining(endDate) {
            const now = new Date();
            const end = new Date(endDate);
            const diff = end - now;
            
            if (diff <= 0) {
                return 'ƒê√£ h·∫øt h·∫°n';
            }
            
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            
            if (days > 0) {
                return `H·∫øt h·∫°n sau ${days} ng√†y`;
            } else if (hours > 0) {
                return `H·∫øt h·∫°n sau ${hours} gi·ªù`;
            } else {
                return `H·∫øt h·∫°n sau ${minutes} ph√∫t`;
            }
        }
        
  </script>
  <script>
    document.querySelectorAll('.menu li').forEach(item => {
      item.addEventListener('click', () => {
        document.querySelectorAll('.menu li').forEach(li => li.classList.remove('active'));
        document.querySelectorAll('.section').forEach(sec => sec.classList.remove('active'));
        item.classList.add('active');
        const target = item.getAttribute('data-target');
        document.getElementById(target).classList.add('active');
      });
    });
  </script>
</body>

</html>
